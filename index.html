<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ЁЯкФ ржорж╛ржзржмржо ржкржЮрзНржЬрж┐ржХрж╛ тАФ рж╕рзВрж░рзНржпрж╕рж┐ржжрзНржзрж╛ржирзНржд ржХрзЛрж░ (vC5)</title>
<style>
:root{--bg:#fff4e3;--card:#fff8ee;--pink:#f6a9d6;--red:#c62828;--label:#4527a0;--shadow:0 4px 14px rgba(0,0,0,.1)}
body{margin:0;background:var(--bg);font-family:"Noto Sans Bengali",system-ui,sans-serif;color:#1a1a1a}
.wrap{max-width:400px;margin:auto;padding:10px}
.card{background:var(--card);border-radius:16px;padding:10px;margin:10px;box-shadow:var(--shadow)}
.title{text-align:center;font-weight:900;font-size:20px;margin-bottom:6px}
.pill{background:var(--pink);border-radius:12px;padding:10px;margin:6px 0}
.label{color:var(--label);font-weight:900;font-size:15px}
.value{font-weight:900;font-size:22px;line-height:1.2}
.sub{font-size:14px;margin-top:2px}.sub b{font-weight:900}
.grid{display:grid;gap:6px;grid-template-columns:1fr 1fr}
.note{font-size:12px;text-align:center;margin-top:6px;opacity:.8}
</style>
</head>
<body>
<div class="wrap" id="root"><div style="text-align:center;margin-top:40px;font-weight:700">ЁЯУН ржЕржмрж╕рзНржерж╛ржи ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...</div></div>

<script>
const state={lat:22.5726,lon:88.3639,tz:5.5,city:"ржХрж▓ржХрж╛рждрж╛"};
async function detect(){
 return new Promise(resolve=>{
  if(navigator.geolocation){
   navigator.geolocation.getCurrentPosition(p=>resolve({lat:p.coords.latitude,lon:p.coords.longitude,city:"GPS",tz:(new Date().getTimezoneOffset()/-60)}),
    async()=>{try{const r=await fetch("https://ipapi.co/json/");const d=await r.json();
     if(d.latitude)resolve({lat:d.latitude,lon:d.longitude,city:d.city||"IP",tz:(new Date().getTimezoneOffset()/-60)});
     else resolve(state);}catch{resolve(state);}});
  }else resolve(state);
 });
}
const D2R=Math.PI/180,R2D=180/Math.PI,norm=x=>(x%360+360)%360;
const NAK=["ржЕрж╢рзНржмрж┐ржирзА","ржнрж░ржгрзА","ржХрзГрждрзНрждрж┐ржХрж╛","рж░рзЛрж╣рж┐ржгрзА","ржорзГржЧрж╢рж┐рж░рж╛","ржЖржжрзНрж░рж╛","ржкрзБржирж░рзНржмрж╕рзБ","ржкрзБрж╖рзНржпрж╛","ржЕрж╢рзНрж▓рзЗрж╖рж╛","ржоржШрж╛","ржкрзВрж░рзНржмржлрж╛рж▓рзНржЧрзБржирзА","ржЙрждрзНрждрж░ржлрж╛рж▓рзНржЧрзБржирзА","рж╣рж╕рзНрждрж╛","ржЪрж┐рждрзНрждрзНрж░рж╛","рж╕рзНржмрж╛рждрзА","ржмрж┐рж╢рж╛ржЦрж╛","ржЕржирзБрж░рж╛ржзрж╛","ржЬрзНржпрзЗрж╖рзНржарж╛","ржорзВрж▓рж╛","ржкрзВрж░рзНржмрж╛рж╖рж╛ржврж╝рж╛","ржЙрждрзНрждрж░рж╛рж╖рж╛ржврж╝рж╛","рж╢рзНрж░ржмржгрж╛","ржзржирж┐рж╖рзНржарж╛","рж╢рждржнрж┐рж╖рж╛","ржкрзВрж░рзНржмржнрж╛ржжрзНрж░рж╛","ржЙрждрзНрждрж░ржнрж╛ржжрзНрж░рж╛","рж░рзЗржмрждрзА"];
function JD(y,m,d,u=0){if(m<=2){y--;m+=12;}const A=Math.floor(y/100),B=2-A+Math.floor(A/4);
return Math.floor(365.25*(y+4716))+Math.floor(30.6001*(m+1))+d+B-1524.5+u/24;}
function ob(T){return 23.439291-0.0130042*T;}
function gmst(J){const T=(J-2451545)/36525;return norm(280.4606+360.985647*(J-2451545)+0.0003879*T*T-T*T*T/38710000);}
function sunL(J){const d=J-2451545;const M=norm(357.53+0.9856*d);
return norm(280.46+0.985647*d+1.915*Math.sin(M*D2R)+0.02*Math.sin(2*M*D2R));}
function moonL(J){const d=J-2451545;const Lm=norm(218.3165+13.176358*d);
const D=norm(297.85+12.19*d),Ms=norm(357.53+0.9856*d),Mm=norm(134.96+13.06*d);
return norm(Lm+6.29*Math.sin(Mm*D2R)+1.27*Math.sin((2*D-Mm)*D2R)+0.66*Math.sin(2*D*D2R)-0.19*Math.sin(Ms*D2R));}
function eclToEq(l,J){const e=ob((J-2451545)/36525)*D2R,L=l*D2R;return{ra:norm(Math.atan2(Math.sin(L)*Math.cos(e),Math.cos(L))*R2D)/15,dec:Math.asin(Math.sin(e)*Math.sin(L))*R2D};}
function hrAng(J,ra,lat,lon,tz){const lst=(gmst(J)/15+tz+lon/15);let H=(lst-ra)*15;return((H+540)%360)-180;}
function alt(dec,H,lat){return Math.asin(Math.sin(lat*D2R)*Math.sin(dec*D2R)+Math.cos(lat*D2R)*Math.cos(dec*D2R)*Math.cos(H*D2R))*R2D;}
function rs(b,J0,lat,lon,tz){let r=null,s=null;for(let h=-12;h<12;h++){const J1=J0+(h-0.5-tz)/24,J2=J0+(h+0.5-tz)/24;
const L1=b=="sun"?sunL(J1):moonL(J1),L2=b=="sun"?sunL(J2):moonL(J2);const q1=eclToEq(L1,J1),q2=eclToEq(L2,J2);
const a1=alt(q1.dec,hrAng(J1,q1.ra,lat,lon,tz),lat),a2=alt(q2.dec,hrAng(J2,q2.ra,lat,lon,tz),lat);
if(a1<0&&a2>0&&!r){r=(h-0.5)-a1/(a2-a1);}if(a1>0&&a2<0&&!s){s=(h-0.5)+a1/(a1-a2);}}return{r,s};}
const to12=h=>{if(isNaN(h))return"тАФ";h=(h+24)%24;const ap=h>=12?"PM":"AM";let hh=Math.floor(h%12);if(hh===0)hh=12;const mm=Math.round((h%1)*60);return `${hh}:${String(mm).padStart(2,"0")} ${ap}`;};
function tithiName(n){const a=["ржкрзНрж░рждрж┐ржкржжрж╛","ржжрзНржмрж┐рждрзАржпрж╝рж╛","рждрзГрждрзАржпрж╝рж╛","ржЪрждрзБрж░рзНржерзА","ржкржЮрзНржЪржорзА","рж╖рж╖рзНржарзА","рж╕ржкрзНрждржорзА","ржЕрж╖рзНржЯржорзА","ржиржмржорзА","ржжрж╢ржорзА","ржПржХрж╛ржжрж╢рзА","ржжрзНржмрж╛ржжрж╢рзА","рждрзНрж░ржпрж╝рзЛржжрж╢рзА","ржЪрждрзБрж░рзНржжрж╢рзА","ржкрзМрж░рзНржгрж┐ржорж╛","ржкрзНрж░рждрж┐ржкржжрж╛","ржжрзНржмрж┐рждрзАржпрж╝рж╛","рждрзГрждрзАржпрж╝рж╛","ржЪрждрзБрж░рзНржерзА","ржкржЮрзНржЪржорзА","рж╖рж╖рзНржарзА","рж╕ржкрзНрждржорзА","ржЕрж╖рзНржЯржорзА","ржиржмржорзА","ржжрж╢ржорзА","ржПржХрж╛ржжрж╢рзА","ржжрзНржмрж╛ржжрж╢рзА","рждрзНрж░ржпрж╝рзЛржжрж╢рзА","ржЪрждрзБрж░рзНржжрж╢рзА","ржЕржорж╛ржмрж╕рзНржпрж╛"];return a[(n-1)%30];}

async function init(){
 const loc=await detect();const{lat,lon,tz,city}=loc;
 const now=new Date();const Y=now.getFullYear(),M=now.getMonth()+1,D=now.getDate();
 const J0=JD(Y,M,D,0);const S=rs("sun",J0,lat,lon,tz),Moo=rs("moon",J0,lat,lon,tz);
 const sr=S.r?to12(S.r+12+tz):"тАФ",ss=S.s?to12(S.s+12+tz):"тАФ",mr=Moo.r?to12(Moo.r+12+tz):"тАФ",ms=Moo.s?to12(Moo.s+12+tz):"тАФ";
 const diff=norm(moonL(J0)-sunL(J0)),num=Math.floor(diff/12)+1;const nidx=Math.floor(moonL(J0)/(13+20/60));
 document.getElementById("root").innerHTML=`<section class="card"><div class="title">ЁЯкФ ржкржЮрзНржЬрж┐ржХрж╛</div>
 <div class="note">рж╕рзВрж░рзНржпрж╕рж┐ржжрзНржзрж╛ржирзНржд ржЕржирзБрж╕рж╛рж░рзЗ ржЧржгржирж╛ (${city})</div>
 <div class="pill"><div class="label">рждрж┐ржерж┐</div><div class="value">${tithiName(num)}</div><div class="sub"><b>ржкрж░ржмрж░рзНрждрзА:</b> ${tithiName((num%30)+1)}</div></div>
 <div class="pill"><div class="label">ржиржХрзНрж╖рждрзНрж░</div><div class="value">${NAK[nidx]}</div><div class="sub"><b>ржкрж░ржмрж░рзНрждрзА:</b> ${NAK[(nidx+1)%27]}</div></div>
 <div class="grid"><div class="pill"><div class="label">рж╕рзВрж░рзНржпрзЛржжржпрж╝</div><div class="value">${sr}</div></div>
 <div class="pill"><div class="label">рж╕рзВрж░рзНржпрж╛рж╕рзНржд</div><div class="value">${ss}</div></div>
 <div class="pill"><div class="label">ржЪржирзНржжрзНрж░рзЛржжржпрж╝</div><div class="value">${mr}</div></div>
 <div class="pill"><div class="label">ржЪржирзНржжрзНрж░рж╛рж╕рзНржд</div><div class="value">${ms}</div></div></div>
 <div class="note">Latitude ${lat.toFixed(2)}┬░, Longitude ${lon.toFixed(2)}┬░, Timezone UTC${tz>=0?'+':''}${tz}</div></section>`;
}
init();
</script>
</body>
</html>
